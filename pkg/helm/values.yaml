nameOverride: ""
fullnameOverride: ""

# Image from Docker Hub
imageRepository: vainkop/keydb8
imageTag: "8.2.3"
imagePullPolicy: IfNotPresent
imagePullSecrets: []

nodes: 1

password: ""
existingSecret: ""
existingSecretPasswordKey: "password"

port: 6379
internalPort: 6379
internalPortName: keydb
threads: 2

multiMaster: "no"
activeReplicas: "no"
protectedMode: "no"
appendonly: "no"

## Pod annotations
podAnnotations: {}

## Extra environment variables
extraEnvVars: []

## Additional init containers
extraInitContainers: []

## Additional sidecar containers
extraContainers: []

## Extra volumes
extraVolumes: []

service:
  annotations: {}
  appProtocol:
    enabled: false

## LoadBalancer Service
loadBalancer:
  enabled: false
  annotations: {}

## Internal headless service  
headlessService:
  enabled: true

## Service Monitor for Prometheus Operator
serviceMonitor:
  enabled: false
  labels: {}
  annotations: {}

## Persist data to a persistent volume
persistence:
  enabled: true
  ## database data Persistent Volume Storage Class
  ## If defined, storageClassName: <storageClass>
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined (the default) or set to null, no storageClassName spec is
  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
  ##   GKE, AWS & OpenStack)
  ##
  # storageClass: "-"
  accessMode: ReadWriteOnce
  size: 3Gi

## Configure resource requests
resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 250m
    memory: 256Mi


## Configure extra options for liveness and readiness probes
livenessProbe:
  enabled: true
  custom: {}
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 5

readinessProbe:
  enabled: true
  custom: {}
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 1
  successThreshold: 1
  failureThreshold: 5

startupProbe:
  enabled: true
  custom: {}
  periodSeconds: 5
  timeoutSeconds: 1
  failureThreshold: 24

## Pod-level security context
securityContext: {}

## Container-level security context for keydb container
keydb:
  securityContext: {}

## Lifecycle hooks
lifecycle: {}

##
## Additional KeyDB configuration arguments
## ref: https://docs.keydb.dev/docs/config-file/
##
## Format: array of dictionaries where key is the argument name and value can be:
##   - A string: --key "value"
##   - An array: --key "arg1" "arg2" "arg3" (for multi-argument options)
##   - null/empty: --key (flag without value)
##
configExtraArgs: []
  # Examples:
  # - client-output-buffer-limit: ["normal", "0", "0", "0"]
  # - client-output-buffer-limit: ["replica", "256mb", "64mb", "60"]
  # - client-output-buffer-limit: ["pubsub", "32mb", "8mb", "60"]
  # - save: ~
  # - tcp-backlog: "1024"
  # - appendonly: "yes"

## Node labels for pod assignment
## Ref: https://kubernetes.io/docs/user-guide/node-selection/
##
nodeSelector: {}

## Tolerations for pod assignment
## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
##
tolerations: []

## Affinity for pod assignment
## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
##
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
          - key: app.kubernetes.io/name
            operator: In
            values:
            - keydb
          - key: app.kubernetes.io/instance
            operator: In
            values:
            - keydb
        topologyKey: "kubernetes.io/hostname"

## Additional affinities
additionalAffinities: {}

## Topology spread constraints
topologySpreadConstraints: []

## Pod Disruption Budget
## https://kubernetes.io/docs/concepts/workloads/pods/disruptions/
podDisruptionBudget:
  enabled: false
  minAvailable: 1

## Prometheus exporter configuration
exporter:
  enabled: false
  image: oliver006/redis_exporter
  tag: latest
  pullPolicy: IfNotPresent
  resources: {}
  extraArgs: {}
  port: 9121
  scrapePath: /metrics
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    selector: {}
    annotations: {}
  # maxUnavailable: 1

## Service account
## ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
serviceAccount:
  create: true
  ## The name of the ServiceAccount to use.
  ## If not set and create is true, a name is generated using the fullname template
  name: ""
  annotations: {}

## RBAC
## ref: https://kubernetes.io/docs/reference/access-authn-authz/rbac/
rbac:
  create: false